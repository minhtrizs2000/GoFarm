{
  "version": 3,
  "sources": ["../../app/scripts/cart.js"],
  "sourcesContent": ["const btn_minus_list = document.querySelectorAll(\".cart-item__quantity .button-minus\");\r\nconst btn_plus_list = document.querySelectorAll(\".cart-item__quantity .button-plus\");\r\nconst quantity_list = document.querySelectorAll(\".cart-item__quantity .product-qty\");\r\nconst cart_counter =  document.querySelector(\".cart-heading__counter\");\r\nconst final_price =  document.querySelectorAll(\".cart-item__final-price\");\r\nconst compare_price =  document.querySelectorAll(\".cart-item__compare-price\");\r\nconst subtotal_price =  document.querySelectorAll(\".cart-item__subtotal-price\");\r\nconst subtotal_compare_price =  document.querySelectorAll(\".cart-item__subtotal-compare\");\r\nconst remove_icon = document.querySelectorAll(\".cart-wrapper .remove-icon\");\r\nconst cart_subtotal = document.querySelector(\".cart-total .list__subtotal-value\");\r\nconst cart_total = document.querySelector(\".cart-total .list__total-value\");\r\n\r\nbtn_minus_list.forEach(function(btn_minus,index){\r\n    btn_minus.addEventListener(\"click\", function () {\r\n        const parent_element = this.parentElement;\r\n        var qty = parseInt(quantity_list[index].value);\r\n        var new_qty = qty - 1;\r\n        if (new_qty >= 0) {\r\n          $.ajax({\r\n            type: \"POST\",\r\n            url: \"/cart/change.js\",\r\n            dataType: \"json\",\r\n            data: {\r\n              'id': parent_element.dataset.key,\r\n              'quantity': new_qty,\r\n            },\r\n            success: function (res) {  \r\n              updateCartPage(res, index , new_qty);\r\n            },\r\n            error: function (e) {\r\n              console.log(e);\r\n            },\r\n          });\r\n        }\r\n       \r\n      });\r\n      \r\n})\r\n\r\nbtn_plus_list.forEach(function(btn_plus,index){\r\n    btn_plus.addEventListener(\"click\", function () {\r\n    const parent_element = this.parentElement;\r\n    var qty = parseInt(quantity_list[index].value);\r\n    var new_qty = qty + 1;\r\n   \r\n    $.ajax({\r\n      type: \"POST\",\r\n      url: \"/cart/change.js\",\r\n      dataType: \"json\",\r\n      data: {\r\n        'id': parent_element.dataset.key,\r\n        'quantity': new_qty,\r\n      },\r\n      success: function (res) {\r\n        updateCartPage(res, index , new_qty);\r\n      },\r\n      error: function (e) {\r\n        console.log(e);\r\n      },\r\n    });\r\n  });\r\n})\r\n\r\nremove_icon.forEach((icon)=>{\r\n  icon.addEventListener('click', function(e){\r\n    var index = this.dataset.index;\r\n    var id = this.dataset.id;\r\n    e.preventDefault();\r\n      \r\n    $.ajax({\r\n        type: \"POST\",\r\n        url: \"/cart/change.js\",\r\n        dataType: \"json\",\r\n        data: {\r\n          'id': id,\r\n          'quantity': 0,\r\n        },\r\n        success: function (res) {\r\n          $(\".cart-wrapper\").find(`tbody tr:nth-child(${index})`).remove();\r\n          cart_subtotal.innerText = '$' + res.items_subtotal_price/100;\r\n          cart_total.innerText = '$' + res.total_price/100;\r\n          $(\".cart-wrapper .cart-heading__counter\").text(`(${res.item_count})`);\r\n        },\r\n        error: function (e) {\r\n          console.log(e);\r\n        },\r\n    });\r\n  })\r\n})\r\n\r\n\r\nfunction updateCartPage(res, index, new_qty){\r\n  quantity_list[index].value = new_qty;\r\n  cart_counter.innerText = `(${res.item_count})`;\r\n  subtotal_price[index].innerText = '$' + final_price[index].innerText.slice(1) * new_qty;\r\n  subtotal_compare_price[index].innerText = '$' + compare_price[index].innerText.slice(1) * new_qty;\r\n  cart_subtotal.innerText = '$' + res.items_subtotal_price/100;\r\n  cart_total.innerText = '$' + res.total_price/100;\r\n}\r\n"],
  "mappings": "MAAA,GAAM,GAAiB,SAAS,iBAAiB,sCAC3C,EAAgB,SAAS,iBAAiB,qCAC1C,EAAgB,SAAS,iBAAiB,qCAC1C,EAAgB,SAAS,cAAc,0BACvC,EAAe,SAAS,iBAAiB,2BACzC,EAAiB,SAAS,iBAAiB,6BAC3C,EAAkB,SAAS,iBAAiB,8BAC5C,EAA0B,SAAS,iBAAiB,gCACpD,EAAc,SAAS,iBAAiB,8BACxC,EAAgB,SAAS,cAAc,qCACvC,EAAa,SAAS,cAAc,kCAE1C,EAAe,QAAQ,SAAS,EAAU,EAAM,CAC5C,EAAU,iBAAiB,QAAS,UAAY,CAC5C,GAAM,GAAiB,KAAK,cAC5B,GAAI,GAAM,SAAS,EAAc,GAAO,OACpC,EAAU,EAAM,EACpB,AAAI,GAAW,GACb,EAAE,KAAK,CACL,KAAM,OACN,IAAK,kBACL,SAAU,OACV,KAAM,CACJ,GAAM,EAAe,QAAQ,IAC7B,SAAY,GAEd,QAAS,SAAU,EAAK,CACtB,EAAe,EAAK,EAAQ,IAE9B,MAAO,SAAU,EAAG,CAClB,QAAQ,IAAI,UAS1B,EAAc,QAAQ,SAAS,EAAS,EAAM,CAC1C,EAAS,iBAAiB,QAAS,UAAY,CAC/C,GAAM,GAAiB,KAAK,cAC5B,GAAI,GAAM,SAAS,EAAc,GAAO,OACpC,EAAU,EAAM,EAEpB,EAAE,KAAK,CACL,KAAM,OACN,IAAK,kBACL,SAAU,OACV,KAAM,CACJ,GAAM,EAAe,QAAQ,IAC7B,SAAY,GAEd,QAAS,SAAU,EAAK,CACtB,EAAe,EAAK,EAAQ,IAE9B,MAAO,SAAU,EAAG,CAClB,QAAQ,IAAI,UAMpB,EAAY,QAAQ,AAAC,GAAO,CAC1B,EAAK,iBAAiB,QAAS,SAAS,EAAE,CACxC,GAAI,GAAQ,KAAK,QAAQ,MACrB,EAAK,KAAK,QAAQ,GACtB,EAAE,iBAEF,EAAE,KAAK,CACH,KAAM,OACN,IAAK,kBACL,SAAU,OACV,KAAM,CACJ,GAAM,EACN,SAAY,GAEd,QAAS,SAAU,EAAK,CACtB,EAAE,iBAAiB,KAAK,sBAAsB,MAAU,SACxD,EAAc,UAAY,IAAM,EAAI,qBAAqB,IACzD,EAAW,UAAY,IAAM,EAAI,YAAY,IAC7C,EAAE,wCAAwC,KAAK,IAAI,EAAI,gBAEzD,MAAO,SAAU,EAAG,CAClB,QAAQ,IAAI,UAOtB,WAAwB,EAAK,EAAO,EAAQ,CAC1C,EAAc,GAAO,MAAQ,EAC7B,EAAa,UAAY,IAAI,EAAI,cACjC,EAAe,GAAO,UAAY,IAAM,EAAY,GAAO,UAAU,MAAM,GAAK,EAChF,EAAuB,GAAO,UAAY,IAAM,EAAc,GAAO,UAAU,MAAM,GAAK,EAC1F,EAAc,UAAY,IAAM,EAAI,qBAAqB,IACzD,EAAW,UAAY,IAAM,EAAI,YAAY",
  "names": []
}
