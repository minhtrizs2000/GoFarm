{
  "version": 3,
  "sources": ["../../app/scripts/product-form-handle.js"],
  "sourcesContent": ["if (!customElements.get(\"product-form\")) {\r\n  customElements.define(\r\n    \"product-form\",\r\n    class ProductForm extends HTMLElement {\r\n      constructor() {\r\n        super();\r\n\r\n        this.form = this.querySelector(\"form\");\r\n        this.form.querySelector(\"[name=id]\").disabled = false;\r\n        this.form.addEventListener(\"submit\", this.onSubmitHandler.bind(this));\r\n        //this.cartNotification = document.querySelector(\"cart-notification\");\r\n        this.submitButton = this.querySelector('[type=\"submit\"]');\r\n      }\r\n\r\n      onSubmitHandler(evt) {\r\n        evt.preventDefault();\r\n        if (this.submitButton.getAttribute(\"aria-disabled\") === \"true\") return;\r\n\r\n        this.handleErrorMessage();\r\n        //this.cartNotification.setActiveElement(document.activeElement);\r\n\r\n        this.submitButton.setAttribute(\"aria-disabled\", true);\r\n        this.submitButton.classList.add(\"loading\");\r\n        this.querySelector(\".loading-overlay__spinner\").classList.remove(\r\n          \"hidden\"\r\n        );\r\n\r\n        // const config = fetchConfig(\"javascript\");\r\n        // config.headers[\"X-Requested-With\"] = \"XMLHttpRequest\";\r\n        // delete config.headers[\"Content-Type\"];\r\n\r\n        const formData = new FormData(this.form);\r\n        // formData.append(\r\n        //   \"sections\",\r\n        //   this.cartNotification\r\n        //     .getSectionsToRender()\r\n        //     .map((section) => section.id)\r\n        // );\r\n        // formData.append(\"sections_url\", window.location.pathname);\r\n        // config.body = formData;\r\n        const config = {\r\n          method: \"POST\",\r\n          body: formData,\r\n        };\r\n\r\n        fetch(window.Shopify.routes.root + 'cart/add.js', config)\r\n          .then((response) => response.json())\r\n          .then((response) => {\r\n            if (response.status) {\r\n              this.handleErrorMessage(response.description);\r\n\r\n              const soldOutMessage =\r\n                this.submitButton.querySelector(\".sold-out-message\");\r\n              if (!soldOutMessage) return;\r\n              this.submitButton.setAttribute(\"aria-disabled\", true);\r\n              this.submitButton.querySelector(\"span\").classList.add(\"hidden\");\r\n              soldOutMessage.classList.remove(\"hidden\");\r\n              this.error = true;\r\n              return;\r\n            }\r\n\r\n            this.error = false;\r\n           \r\n            // const cart_number = document.querySelector(\".header-top__cart .cart-number p\");\r\n            // cart_number.innerText = parseInt(cart_number.innerText) + response.quantity;\r\n          \r\n            // const quickAddModal = this.closest(\"quick-add-modal\");\r\n            // if (quickAddModal) {\r\n            //   document.body.addEventListener(\r\n            //     \"modalClosed\",\r\n            //     () => {\r\n            //       setTimeout(() => {\r\n            //         this.cartNotification.renderContents(response);\r\n            //       });\r\n            //     },\r\n            //     { once: true }\r\n            //   );\r\n            //   quickAddModal.hide(true);\r\n            // } else {\r\n            //   this.cartNotification.renderContents(response);\r\n            // }\r\n          })\r\n          .catch((e) => {\r\n            console.error(e);\r\n          })\r\n          .finally(() => {\r\n            this.submitButton.classList.remove(\"loading\");\r\n            if (!this.error) this.submitButton.removeAttribute(\"aria-disabled\");\r\n            this.querySelector(\".loading-overlay__spinner\").classList.add(\r\n              \"hidden\"\r\n            );\r\n          });\r\n      }\r\n\r\n      handleErrorMessage(errorMessage = false) {\r\n        this.errorMessageWrapper =\r\n          this.errorMessageWrapper ||\r\n          this.querySelector(\".product-form__error-message-wrapper\");\r\n        if (!this.errorMessageWrapper) return;\r\n        this.errorMessage =\r\n          this.errorMessage ||\r\n          this.errorMessageWrapper.querySelector(\r\n            \".product-form__error-message\"\r\n          );\r\n\r\n        this.errorMessageWrapper.toggleAttribute(\"hidden\", !errorMessage);\r\n\r\n        if (errorMessage) {\r\n          this.errorMessage.textContent = errorMessage;\r\n        }\r\n      }\r\n    }\r\n  );\r\n}\r\n"],
  "mappings": "MAAA,AAAK,eAAe,IAAI,iBACtB,eAAe,OACb,eACA,aAA0B,YAAY,CACpC,aAAc,CACZ,QAEA,KAAK,KAAO,KAAK,cAAc,QAC/B,KAAK,KAAK,cAAc,aAAa,SAAW,GAChD,KAAK,KAAK,iBAAiB,SAAU,KAAK,gBAAgB,KAAK,OAE/D,KAAK,aAAe,KAAK,cAAc,mBAGzC,gBAAgB,EAAK,CAEnB,GADA,EAAI,iBACA,KAAK,aAAa,aAAa,mBAAqB,OAAQ,OAEhE,KAAK,qBAGL,KAAK,aAAa,aAAa,gBAAiB,IAChD,KAAK,aAAa,UAAU,IAAI,WAChC,KAAK,cAAc,6BAA6B,UAAU,OACxD,UAOF,GAAM,GAAW,GAAI,UAAS,KAAK,MAS7B,EAAS,CACb,OAAQ,OACR,KAAM,GAGR,MAAM,OAAO,QAAQ,OAAO,KAAO,cAAe,GAC/C,KAAK,AAAC,GAAa,EAAS,QAC5B,KAAK,AAAC,GAAa,CAClB,GAAI,EAAS,OAAQ,CACnB,KAAK,mBAAmB,EAAS,aAEjC,GAAM,GACJ,KAAK,aAAa,cAAc,qBAClC,GAAI,CAAC,EAAgB,OACrB,KAAK,aAAa,aAAa,gBAAiB,IAChD,KAAK,aAAa,cAAc,QAAQ,UAAU,IAAI,UACtD,EAAe,UAAU,OAAO,UAChC,KAAK,MAAQ,GACb,OAGF,KAAK,MAAQ,KAqBd,MAAM,AAAC,GAAM,CACZ,QAAQ,MAAM,KAEf,QAAQ,IAAM,CACb,KAAK,aAAa,UAAU,OAAO,WAC9B,KAAK,OAAO,KAAK,aAAa,gBAAgB,iBACnD,KAAK,cAAc,6BAA6B,UAAU,IACxD,YAKR,mBAAmB,EAAe,GAAO,CAIvC,AAHA,KAAK,oBACH,KAAK,qBACL,KAAK,cAAc,wCACjB,EAAC,KAAK,qBACV,MAAK,aACH,KAAK,cACL,KAAK,oBAAoB,cACvB,gCAGJ,KAAK,oBAAoB,gBAAgB,SAAU,CAAC,GAEhD,GACF,MAAK,aAAa,YAAc",
  "names": []
}
